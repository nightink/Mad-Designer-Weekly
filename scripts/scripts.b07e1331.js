"use strict";angular.module("app",["ngAnimate","ngAria","ngCookies","ngSanitize","ngMaterial"]).controller("MainCtrl",["$scope","$mdToast","Week",function(a,b,c){function d(b){return"thisWeek"===b?a.thisWeek:"nextWeek"===b?a.nextWeek:void 0}a.thisWeek=new c({el:document.getElementById("thisWeek"),title:"个人参与项目",cols:[{text:"工作任务"},{text:"参与人",width:200},{text:"工作完成进度",width:150},{text:"耗时",width:150}]}),a.nextWeek=new c({el:document.getElementById("nextWeek"),title:"下周计划",cols:[{text:"工作任务"},{text:"预计时间"}]}),a.keyboard={buffer:[],detectCombination:function(){var a={};return this.buffer.forEach(function(b){a["key_"+b]=1}),(a.key_91||a.key_93)&&a.key_8?"command + delete":void 0},keydown:function(a,b,c){13==a.keyCode?d(b).addRow():(this.buffer.push(a.keyCode),"command + delete"===this.detectCombination()&&d(b).delRow(c))},keyup:function(){this.buffer=[]}},a.generate=function(){b.show(b.simple().content("Markdown 已复制至剪切板!").position("top right").hideDelay(1500))}}]),angular.module("app").factory("Week",["$timeout",function(a){function b(a){this.el=angular.element(a.el),this.title=a.title,this.cols=a.cols,this.rows=a.rows||[{}]}return b.prototype.addRow=function(){return this.rows.push({}),this.focusRow(this.rows.length-1),this},b.prototype.delRow=function(a){return 1!==this.rows.length?(this.rows.splice(a,1),this.focusRow(a-1),this):void 0},b.prototype.focusRow=function(b,c){var d=this;c=c||0,a(function(){d.el.find("tbody").find("tr").eq(b).find("input").eq(c).focus()},0)},b}]);